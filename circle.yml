general:
  artifacts:
    - htmlcov

checkout:
  post:
    - git submodule sync
    - git submodule update --init

test:
  override:
    - mkdir $CIRCLE_TEST_REPORTS/pytest:
        parallel: true
    - py.test --junit-xml=$CIRCLE_TEST_REPORTS/pytest/pytest.xml:
        parallel: true
  post:
    - scp node1:kanji-colorize/.coverage .coverage.1
    - scp node2:kanji-colorize/.coverage .coverage.2
    - coverage combine
    - coverage html
